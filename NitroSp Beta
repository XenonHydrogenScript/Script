local lib = loadstring(game:HttpGet"https://raw.githubusercontent.com/XenonHydrogenScript/Script/refs/heads/main/beta2")() 
local OpenUI = Instance.new("ScreenGui") 
local ImageButton = Instance.new("ImageButton") 
local UICorner = Instance.new("UICorner") 
local uihide = false
local CoreGui = game:GetService("StarterGui")
local WardrobeHighlights = {}
local wardrobeEsp = false
local KeyChams = {}
local keyesp = false
local DoorHighlights = {}
local doorEsp = false
local GeneratorHighlights = {}
local GeneratorEsp = false
local Players = game:GetService("Players")
local GuiService = game:GetService("GuiService")
local player = Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

OpenUI.Name = "OpenUI" 
OpenUI.Parent = game.CoreGui 
OpenUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling 

ImageButton.Parent = OpenUI 
ImageButton.BackgroundColor3 = Color3.fromRGB(5, 6, 7) 
ImageButton.BackgroundTransparency = 0.500 
ImageButton.Position = UDim2.new(0.0235790554, 0, 0.466334164, 0) 
ImageButton.Size = UDim2.new(0, 50, 0, 50) 
ImageButton.Image = "rbxassetid://692827213" 
ImageButton.Draggable = true 

UICorner.CornerRadius = UDim.new(0, 25)
UICorner.Parent = ImageButton 
ImageButton.MouseButton1Click:Connect(function() 
    if uihide then
        uihide = false
        if game.CoreGui:FindFirstChild("ui") and game.CoreGui.ui:FindFirstChild("Main") then
            game.CoreGui.ui.Main:TweenSize(UDim2.new(0, 560, 0, 319), "Out", "Quad", 0.4, true)
        end
    else
        uihide = true
        if game.CoreGui:FindFirstChild("ui") and game.CoreGui.ui:FindFirstChild("Main") then
            game.CoreGui.ui.Main:TweenSize(UDim2.new(0, 0, 0, 0), "In", "Quad", 0.4, true)
        end
    end
end)

local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://6436188054"
sound.Parent = game:GetService("SoundService")
sound.Volume = 1
sound:Play()

CoreGui:SetCore("SendNotification", {
    Title = "XeH₂",
    Text = "用户:"..game.Players.LocalPlayer.Name.."获得验证",
    Duration = 10,
})

local win = lib:Window("NitroSp V1.9", Color3.fromRGB(0, 255, 0), Enum.KeyCode.E)

local xx = win:Tab("| 信息 |")
local gn = win:Tab("| 功能 |")
local zs = win:Tab("| 自身 |")
local ts = win:Tab("| 调试 |")

xx:Label("作者XeH₂")
xx:Label("服务器ID:" .. game.GameId .. ".")

zs:Label("-----通用-----")
zs:Button("获取坐标", function()
    task.spawn(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/HyScriptXlite/-/refs/heads/main/zbcs"))()
    end)
end)

local espEnabled = false
local highlightStorage = Instance.new("Folder")
highlightStorage.Name = "Highlight_Storage"
highlightStorage.Parent = game:GetService("CoreGui")

zs:Toggle("ESP | 玩家", false, function(state)
    espEnabled = state
    if state then
        local function highlightPlayer(plr)
            local highlight = Instance.new("Highlight")
            highlight.Name = plr.Name
            highlight.FillColor = Color3.fromRGB(0, 128, 0)
            highlight.DepthMode = "AlwaysOnTop"
            highlight.FillTransparency = 0.5
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            highlight.OutlineTransparency = 0
            highlight.Adornee = plr.Character
            highlight.Parent = highlightStorage

            plr.CharacterAdded:Connect(function(char)
                highlight.Adornee = char
            end)
        end

        for _, player in ipairs(game:GetService("Players"):GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                highlightPlayer(player)
            end
        end

        game:GetService("Players").PlayerAdded:Connect(highlightPlayer)
    else
        for _, child in ipairs(highlightStorage:GetChildren()) do
            child:Destroy()
        end
    end
end)

zs:Button("Spy", function()
    getgenv().Spy="汉化Spy" loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/refs/heads/main/spy%E6%B1%89%E5%8C%96%20(1).txt"))()
end)
zs:Button("Dex V3", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/IlIlIlIlIlIlIlIlIlIlIlIlIlIlIlIl/Script/main/Tools/DarkDexV3.lua", true))()
end)
zs:Button("FE指令", function()
    loadstring(game:HttpGet(('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'),true))()
end)
zs:Button("工具挂", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Bebo-Mods/BeboScripts/main/StandAwekening.lua"))()
end)
zs:Button("无限连跳", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/V5PQy3y0", true))()
end)
zs:Button("反挂机", function()
    print("Anti Afk On")
		local vu = game:GetService("VirtualUser")
		game:GetService("Players").LocalPlayer.Idled:connect(function()
		   vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
		   wait(1)
		   vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
		end)
    end)
zs:Toggle("夜视", false, function(value)
    if value then
        game.Lighting.Ambient = Color3.new(1, 1, 1)
    else
        game.Lighting.Ambient = Color3.new(0, 0, 0)
    end
end)
zs:Button("阿尔宙斯V3", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/AZYsGithub/chillz-workshop/main/Arceus%20X%20V3"))()
end)
zs:Button("飞车V2 <沙豆汉化>", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/Fish-Script/Flying-car-V2/main/Flying%20car%20V2"))()
end)
zs:Button("Backdoor.exe", function()
loadstring(game: HttpGet(('https://raw.githubusercontent.com/iK4oS/backdoor.exe/master/source.lua'),true))()
end)



gn:Label("-----凹凸世界-----")
gn:Button("获取能量球", function()
    task.spawn(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/KissxTay/caramelldansen/main/chinese%20event", true))()
    end)
end)
gn:Label("-----极速传奇-----")
gn:Button("传送至Jungle洞穴", function()
    local char = game.Players.LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char:MoveTo(Vector3.new(-15260, 240, 3783))
    end
end)
gn:Toggle("红色球体", false, function(state)
    local args = {
        [1] = "collectOrb",
        [2] = "Red Orb",
        [3] = "City"
    }
    local replicatedStorage = game:GetService("ReplicatedStorage")
    local orbEvent = replicatedStorage.rEvents.orbEvent
    local collectingCoroutine = nil
    
    if state then
        collectingCoroutine = task.spawn(function()
            while state do
                local success, err = pcall(function()
                    orbEvent:FireServer(unpack(args))
                end)
                task.wait(0.01)
            end
        end)
    else
        if collectingCoroutine then
            task.cancel(collectingCoroutine)
            collectingCoroutine = nil
        end
    end
end)
gn:Toggle("橙色球体", false, function(state)
    local args = {
        [1] = "collectOrb",
        [2] = "Orange Orb",
        [3] = "City"
    }
    local replicatedStorage = game:GetService("ReplicatedStorage")
    local orbEvent = replicatedStorage.rEvents.orbEvent
    local collectingCoroutine = nil
    
    if state then
        collectingCoroutine = task.spawn(function()
            while state do
                local success, err = pcall(function()
                    orbEvent:FireServer(unpack(args))
                end)
                task.wait(0.01)
            end
        end)
    else
        if collectingCoroutine then
            task.cancel(collectingCoroutine)
            collectingCoroutine = nil
        end
    end
end)
gn:Toggle("蓝色球体", false, function(state)
    local args = {
        [1] = "collectOrb",
        [2] = "Blue Orb",
        [3] = "City"
    }
    local replicatedStorage = game:GetService("ReplicatedStorage")
    local orbEvent = replicatedStorage.rEvents.orbEvent
    local collectingCoroutine = nil
    
    if state then
        collectingCoroutine = task.spawn(function()
            while state do
                local success, err = pcall(function()
                    orbEvent:FireServer(unpack(args))
                end)
                task.wait(0.01)
            end
        end)
    else
        if collectingCoroutine then
            task.cancel(collectingCoroutine)
            collectingCoroutine = nil
        end
    end
end)
gn:Toggle("经验球", false, function(state)
    local args = {
        [1] = "collectOrb",
        [2] = "Yellow Orb",
        [3] = "City"
    }
    local replicatedStorage = game:GetService("ReplicatedStorage")
    local orbEvent = replicatedStorage.rEvents.orbEvent
    local collectingCoroutine = nil
    
    if state then
        collectingCoroutine = task.spawn(function()
            while state do
                local success, err = pcall(function()
                    orbEvent:FireServer(unpack(args))
                end)
                task.wait(0.01)
            end
        end)
    else
        if collectingCoroutine then
            task.cancel(collectingCoroutine)
            collectingCoroutine = nil
        end
    end
end)
gn:Label("-----力量传奇-----")
gn:Button("传送至安全岛", function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(7,3,108)
end)
gn:Button("传送至冰霜健身房", function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-2543,13,-410)
end)
gn:Button("传送至神话健身房", function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(2177,13,1070)
end)
gn:Button("传送至永恒健身房", function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-6686,13,-1284)
end)
gn:Button("传送至传说健身房", function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(4676,997,-3915)
end)
gn:Button("传送至肌肉之王", function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-8554,22,-5642)
end)
gn:Label("-----Doors-----")
gn:Toggle("瞬间互动", false, function(state)
    getgenv().InstantToggle = state
end)

game:GetService("ProximityPromptService").PromptButtonHoldBegan:Connect(function(prompt)
    if getgenv().InstantToggle then
        fireproximityprompt(prompt)
    end
end)

local old
old = hookmetamethod(game, "__namecall", newcclosure(function(self, ...)
    local args = {...}
    local method = getnamecallmethod()
    
    if tostring(self) == 'Screech' and method == "FireServer" and OrionLib.Flags["ScreechToggle"].Value == true then
        args[1] = true
        return old(self, unpack(args))
    end
    
    if tostring(self) == 'ClutchHeartbeat' and method == "FireServer" and OrionLib.Flags["HeartbeatWin"].Value == true then
        args[2] = true
        return old(self, unpack(args))
    end
    
    return old(self, ...)
end))
gn:Button("Blacking", function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/KINGHUB01/BlackKing-obf/main/Doors%20Blackking%20And%20BobHub"))()
end)
gn:Toggle("客户端光亮", false, function(bright)
    applyLight(bright)
end)

local function applyLight(value)
    if value then 
        if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Head") then
            local light = Instance.new('PointLight', game.Players.LocalPlayer.Character.Head)
            light.Name='bright'
            light.Range = 150
            light.Brightness = 1.7
        end
    else
        pcall(function()
            if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Head") then
                game.Players.LocalPlayer.Character.Head.bright:Destroy()
            end
        end)
    end
end
gn:Toggle("钥匙透视", false, function(state)
    keyesp = state
    for _, cham in pairs(KeyChams) do
        cham.Enabled = state
    end
end)

local function ApplyKeyChams(inst)
    local cham = Instance.new("Highlight")
    cham.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    cham.FillColor = Color3.new(255, 105, 180)
    cham.FillTransparency = 0.5
    cham.OutlineColor = Color3.new(1, 1, 0)
    cham.Parent = inst
    cham.Adornee = inst
    cham.Enabled = keyesp
    cham.RobloxLocked = true
    return cham
end

task.spawn(function()
    workspace.CurrentRooms.DescendantAdded:Connect(function(inst)
        if inst.Name == "KeyObtain" then
            table.insert(KeyChams, ApplyKeyChams(inst))
        end
    end)
end)

task.defer(function()
    for _, v in ipairs(workspace:GetDescendants()) do
        if v.Name == "KeyObtain" then
            table.insert(KeyChams, ApplyKeyChams(v))
        end
    end
end)
gn:Toggle("柜子透视", false, function(state)
    wardrobeEsp = state
    for _, cham in pairs(WardrobeHighlights) do
        cham.Enabled = state
    end
end)

local function ApplyWardrobeHighlights(inst)
    local cham = Instance.new("Highlight")
    cham.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    cham.FillColor = Color3.new(255, 236, 0)
    cham.FillTransparency = 0.5
    cham.OutlineColor = Color3.new(1, 1, 0)
    cham.Parent = inst
    cham.Adornee = inst
    cham.Enabled = keyesp
    cham.RobloxLocked = true
    return cham
end

task.spawn(function()
    workspace.CurrentRooms.DescendantAdded:Connect(function(inst)
        if inst.Name == "Wardrobe" then
            table.insert(WardrobeHighlights, ApplyWardrobeHighlights(inst))
        end
    end)
end)

task.defer(function()
    for _, v in ipairs(workspace:GetDescendants()) do
        if v.Name == "Wardrobe" then
            table.insert(WardrobeHighlights, ApplyWardrobeHighlights(v))
        end
    end
end)
gn:Toggle("房门大范围透视", false, function(state)
    doorEsp = state
    for _, cham in pairs(DoorHighlights) do
        cham.Enabled = state
    end
end)

local function ApplyDoorHighlights(inst)
    local cham = Instance.new("Highlight")
    cham.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    cham.FillColor = Color3.new(0, 255, 0)
    cham.FillTransparency = 0.5
    cham.OutlineColor = Color3.new(1, 1, 0)
    cham.Parent = inst
    cham.Adornee = inst
    cham.Enabled = doorEsp
    cham.RobloxLocked = true
    return cham
end

task.spawn(function()
    workspace.CurrentRooms.DescendantAdded:Connect(function(inst)
        if inst.Name == "Door" then
            table.insert(DoorHighlights, ApplyDoorHighlights(inst))
        end
    end)
end)

task.defer(function()
    for _, v in ipairs(workspace:GetDescendants()) do
        if v.Name == "Door" then
            table.insert(DoorHighlights, ApplyDoorHighlights(v))
        end
    end
end)
gn:Label("-----被遗弃-----")
gn:Toggle("发电机透视", false, function(state)
    GeneratorEsp = state
    for _, cham in pairs(GeneratorHighlights) do
        cham.Enabled = state
    end
end)

local function ApplyGeneratorHighlights(inst)
    local cham = Instance.new("Highlight")
    cham.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    cham.FillColor = Color3.new(0, 255, 0)
    cham.FillTransparency = 0.5
    cham.OutlineColor = Color3.new(1, 1, 0)
    cham.Parent = inst
    cham.Adornee = inst
    cham.Enabled = GeneratorEsp
    cham.RobloxLocked = true
    return cham
end

task.spawn(function()
    workspace.Map.DescendantAdded:Connect(function(inst)
        if inst.Name == "Generator" then
            table.insert(GeneratorHighlights, ApplyGeneratorHighlights(inst))
        end
    end)
end)

task.defer(function()
    for _, v in ipairs(workspace:GetDescendants()) do
        if v.Name == "Generator" then
            table.insert(GeneratorHighlights, ApplyGeneratorHighlights(v))
        end
    end
end)
gn:Label("-----Fisch-----")
gn:Toggle("自动摇晃", false, function(state)
    if state then
        local VirtualInputManager = game:GetService("VirtualInputManager")
        local GuiService = game:GetService("GuiService")
        local player = game.Players.LocalPlayer
        local gui = player:WaitForChild("PlayerGui")

        local function clickButton(button)
            GuiService.SelectedObject = button
            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Return, false, game)
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Return, false, game)
        end

        -- 存储所有正在运行的循环，以便可以停止它们
        local runningLoops = {}

        local function stopAllLoops()
            for _, loop in pairs(runningLoops) do
                loop:Disconnect()
            end
            runningLoops = {}
        end

        local function setupButtonListener()
            -- 监听新添加的按钮
            local connection = gui.DescendantAdded:Connect(function(descendant)
                if descendant.Name == "button" and 
                   descendant.Parent and 
                   descendant.Parent.Name == "safezone" and
                   descendant.Parent.Parent and 
                   descendant.Parent.Parent.Name == "shakeui" then
                    local loop
                    loop = task.spawn(function()
                        while descendant and descendant.Parent and state do
                            clickButton(descendant)
                            task.wait()
                        end
                    end)
                    table.insert(runningLoops, loop)
                end
            end)
            table.insert(runningLoops, connection)

            -- 处理已经存在的按钮
            for _, descendant in ipairs(gui:GetDescendants()) do
                if descendant.Name == "button" and 
                   descendant.Parent and 
                   descendant.Parent.Name == "safezone" and
                   descendant.Parent.Parent and 
                   descendant.Parent.Parent.Name == "shakeui" then
                    local loop
                    loop = task.spawn(function()
                        while descendant and descendant.Parent and state do
                            clickButton(descendant)
                            task.wait()
                        end
                    end)
                    table.insert(runningLoops, loop)
                end
            end
        end

        setupButtonListener()
    else
        stopAllLoops()
    end
end)

ts:Label("-----黑暗欺骗-----")
ts:Button("拾取光环", function()
    local player = game.Players.LocalPlayer
    local isRunning = true
    local emptyLocation = CFrame.new(-30, 23, -50)
    local teleportCount = 0
    local batchSize = 5

    local function pickupShard(obj)
        if not obj:IsA("BasePart") then return end

        local character = player.Character or player.CharacterAdded:Wait()
        local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

        if obj.Name == "Shard" or obj.Name == "RedShard" then
            obj.CanCollide = false
            obj.CFrame = humanoidRootPart.CFrame + Vector3.new(0, 3, 0)
            if obj:FindFirstChildWhichIsA("TouchTransmitter") then
                firetouchinterest(humanoidRootPart, obj, 0)
                firetouchinterest(humanoidRootPart, obj, 1)
            end
        elseif obj.Name == "OrangeShard" then
            humanoidRootPart.CFrame = CFrame.new(obj.Position + Vector3.new(0, -3, 0))
            task.wait(0.05)
            humanoidRootPart.CFrame = humanoidRootPart.CFrame + Vector3.new(0, 0.5, 0)
        end
    end

    local function runPickup()
        while isRunning and teleportCount < 5 do
            local shards = workspace:FindFirstChild("Shards")
            if not shards then
                task.wait(0.01)
                continue
            end

            local shardList = shards:GetChildren()

            if #shardList == 0 then
                local character = player.Character or player.CharacterAdded:Wait()
                local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

                humanoidRootPart.CFrame = emptyLocation
                teleportCount = teleportCount + 1
                print("Shadow:", teleportCount.."/5")
                task.wait(0.01)
            else
                teleportCount = 0

                for i = 1, #shardList, batchSize do
                    task.spawn(function()
                        for j = i, math.min(i + batchSize - 1, #shardList) do
                            if not isRunning then break end
                            pickupShard(shardList[j])
                        end
                    end)
                    task.wait(0.01)
                end
            end
            task.wait(0.01)
        end
    end

    local cleanup = runPickup()
    
    return function()
        isRunning = false
        if cleanup then cleanup() end
    end
end)

ts:Toggle("跳过追逐", false, function(isEnabled)
    local player = game.Players.LocalPlayer
    local running = true
    local checkInterval = 0.3
    local moveSpeed = 300
    local arrivalThreshold = 2

    local function chaseSkip()
        while running and isEnabled do
            local shards = workspace:FindFirstChild("Shards")
            if shards and #shards:GetChildren() == 0 then
                local character = player.Character
                if character then
                    local hrp = character:FindFirstChild("HumanoidRootPart")
                    local humanoid = character:FindFirstChildOfClass("Humanoid")

                    if hrp and humanoid then
                        local pos = hrp.Position
                        if (pos - Vector3.new(-29, 21, -55)).Magnitude <= 3 then
                            hrp.CFrame = CFrame.new(2, 21, 63)
                            humanoid.WalkSpeed = moveSpeed

                            local target = Vector3.new(38, 21, 63)
                            while running and isEnabled and (hrp.Position - target).Magnitude > arrivalThreshold do
                                humanoid:MoveTo(target)
                                task.wait(0.1)
                            end

                            humanoid.WalkSpeed = 16
                        end
                    end
                end
            end
            task.wait(checkInterval)
        end
    end

    local cleanup = task.spawn(chaseSkip)
    
    return function()
        running = false
        if cleanup then task.cancel(cleanup) end
    end
end)
